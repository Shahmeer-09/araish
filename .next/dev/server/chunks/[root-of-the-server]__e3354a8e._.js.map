{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/downloads/project/jewelry-showcase/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma: PrismaClient | undefined;\r\n};\r\n\r\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient();\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\r\n\r\nexport default prisma;\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,sMAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG;uCAErD"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///E:/downloads/project/jewelry-showcase/app/api/public/products/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport prisma from '@/lib/prisma';\r\n\r\n// GET paginated products for public display\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const { searchParams } = new URL(request.url);\r\n    const page = parseInt(searchParams.get('page') || '1');\r\n    const limit = parseInt(searchParams.get('limit') || '8');\r\n    const featured = searchParams.get('featured');\r\n    const category = searchParams.get('category');\r\n\r\n    const skip = (page - 1) * limit;\r\n\r\n    const where: {\r\n      featured?: boolean;\r\n      category?: string;\r\n      inStock?: boolean;\r\n    } = {\r\n      inStock: true,\r\n    };\r\n\r\n    if (featured === 'true') {\r\n      where.featured = true;\r\n    }\r\n\r\n    if (category && category !== 'all') {\r\n      where.category = category;\r\n    }\r\n\r\n    const [products, total] = await Promise.all([\r\n      prisma.product.findMany({\r\n        where,\r\n        include: {\r\n          images: {\r\n            select: {\r\n              id: true,\r\n              mimeType: true,\r\n            },\r\n          },\r\n        },\r\n        orderBy: {\r\n          createdAt: 'desc',\r\n        },\r\n        skip,\r\n        take: limit,\r\n      }),\r\n      prisma.product.count({ where }),\r\n    ]);\r\n\r\n    const totalPages = Math.ceil(total / limit);\r\n\r\n    return NextResponse.json({\r\n      products,\r\n      pagination: {\r\n        page,\r\n        limit,\r\n        total,\r\n        totalPages,\r\n        hasNext: page < totalPages,\r\n        hasPrev: page > 1,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.error('Error fetching public products:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch products' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,OAAO,SAAS,aAAa,GAAG,CAAC,WAAW;QAClD,MAAM,QAAQ,SAAS,aAAa,GAAG,CAAC,YAAY;QACpD,MAAM,WAAW,aAAa,GAAG,CAAC;QAClC,MAAM,WAAW,aAAa,GAAG,CAAC;QAElC,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI;QAE1B,MAAM,QAIF;YACF,SAAS;QACX;QAEA,IAAI,aAAa,QAAQ;YACvB,MAAM,QAAQ,GAAG;QACnB;QAEA,IAAI,YAAY,aAAa,OAAO;YAClC,MAAM,QAAQ,GAAG;QACnB;QAEA,MAAM,CAAC,UAAU,MAAM,GAAG,MAAM,QAAQ,GAAG,CAAC;YAC1C,0HAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;gBACtB;gBACA,SAAS;oBACP,QAAQ;wBACN,QAAQ;4BACN,IAAI;4BACJ,UAAU;wBACZ;oBACF;gBACF;gBACA,SAAS;oBACP,WAAW;gBACb;gBACA;gBACA,MAAM;YACR;YACA,0HAAM,CAAC,OAAO,CAAC,KAAK,CAAC;gBAAE;YAAM;SAC9B;QAED,MAAM,aAAa,KAAK,IAAI,CAAC,QAAQ;QAErC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB;YACA,YAAY;gBACV;gBACA;gBACA;gBACA;gBACA,SAAS,OAAO;gBAChB,SAAS,OAAO;YAClB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}